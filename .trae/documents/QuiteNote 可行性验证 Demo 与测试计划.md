**范围概览**
- 目标：基于方案文档验证关键技术与交互在 macOS 原生栈（Swift/SwiftUI + CoreBluetooth）下的可行性与稳定性。
- 依据：蓝牙协议与状态机（文档 18–33 行）、架构与模块（35–46 行）、数据模型（48–52 行）、动画规范（53–58 行）、AI 任务规范（63–76 行）、菜单/偏好（77–90 行）、测试指引（117–121 行）。

**BLE 按钮事件 Demo**
- 目标：Central 连接自定义 GATT，订阅 `CHAR_BUTTON_EVT`，解析载荷并回写 `CHAR_ACK`，实现防抖与指数退避重连（18–33 行）。
- 最小实现：扫描指定 `SERVICE` UUID；特征发现与 `Notify` 订阅；事件帧解析（event_id/seq/flags）；ACK 写回；1 秒时间窗防抖；状态机与退避；日志面板。
- 验证点：连接/重连/断连；重复事件去重；长按/双击 flags；心跳处理；ACK 时序；RSSI 波动与抗干扰。
- 测试方法：使用真实外设或 nRF Connect/LightBlue 广播自定义服务与通知；录制并回放事件序列；注入丢包/乱序；统计事件处理耗时与丢失率；阈值：连接建立 <3s、事件端到端 <50ms、重复处理率=0、ACK 成功率=100%。

**悬浮窗与动效 Demo**
- 目标：`NSPanel` 置顶、跨桌面显示（35 行），展收动效规范（53–58 行），拖拽与位置锁定、单项展开与复制气泡提示（54–56 行）。
- 最小实现：SwiftUI Hosting `NSPanel(level: .floating, canJoinAllSpaces)`；展收动画 300/250ms；条目展开 200ms；双击复制后 2s 气泡提示。
- 验证点：与全屏 App 的遮挡关系；多桌面切换可见性；动画帧率≥60fps；位置锁定生效。
- 测试方法：脚本化打开/收起循环 1,000 次；在全屏 Safari/Xcode 下切换空间；统计掉帧与 UI 卡顿；阈值：平均帧时 <16.7ms，切换空间不丢失窗口。

**状态栏菜单与指示 Demo**
- 目标：菜单结构与快捷入口（77–88 行）、蓝牙状态图标与 hover 设备名（9 行）。
- 最小实现：`NSStatusBar` 图标；连/未连/重连中三态；菜单项动作绑定；hover 显示设备名。
- 验证点：图标状态切换实时；菜单项可用性与灰化逻辑；快捷入口触发窗口展收。
- 测试方法：驱动 BLE 状态变化；点击/快捷键操作回归；统计 UI 响应时间。

**剪贴板采集与去重 Demo**
- 目标：监控 `NSPasteboard`，空剪贴板轻提示（13 行），10 分钟去重策略（13 行），双击复制反馈（14 行）。
- 最小实现：轮询/事件驱动采集；内容哈希；空值检测；重复丢弃；采集后生成记录与反馈气泡。
- 验证点：真实中文办公文本、多段落、大文本；复制再采集闭环；防抖与去重边界；空剪贴板提示仅一次。
- 测试方法：使用系统剪贴板真实内容；批量粘贴 1,000 条；测存取耗时与 UI 响应；阈值：采集耗时 <30ms，重复率控制=预期，提示不抖动。

**RecordStore 存储与搜索 Demo**
- 目标：CoreData/SQLite 存储（39 行），索引与搜索、星标/删除/编辑、导出 txt/Markdown（39 行，12 行）。
- 最小实现：`Record` 模型（48 行）；CRUD 与查询；全文或前缀搜索；分页显示最近 10 条；导出文件到用户目录（94 行）。
- 验证点：重启持久化；搜索实时过滤；编辑/星标一致性；导出文件编码与中文兼容。
- 测试方法：导入 10k+ 记录；基准查询延迟；文件导出打开验证；阈值：搜索延迟 P95 <50ms，写入 P95 <20ms。

**热力图联动 Demo**
- 目标：日/周/月聚合与主题（59–62 行），点击色块筛选记录与 tooltip 联动（60–62 行）。
- 最小实现：按 `createdAt` 聚合矩阵；主题深浅；点击筛选更新列表；tooltip 显示当日数量与日期（102 行样例）。
- 验证点：聚合正确性与边界（跨月、闰年）；联动延迟；UI 一致性。
- 测试方法：构造真实日期分布数据集；对比手算计数；阈值：联动更新 <50ms，计数误差=0。

**AI 提炼 Demo**
- 目标：本地/云端模型适配、速率限制、超时降级与重试（42、63–76 行），固定 JSON 输出（65–72 行），标题/总结长度约束与降级规则（73–75 行）。
- 最小实现：`AIService` 抽象；本地 Llama 3 8B 量化或云端 API；5s 超时返回默认标题与空总结；失败缓存任务重试一次；无效结果忽略并提供“点击重试”。
- 验证点：标题 15–25 字、总结 50–100 字；`confidence` 合理范围；链接/代码/纯数字降级为前 20 字 +「无需总结」。
- 测试方法：使用真实中文文本（96–100 行样例）与长文本；注入网络错误与超时；统计成功率/响应时长；阈值：成功率≥95%、超时正确降级、JSON 校验 100%。

**偏好设置与配置存储 Demo**
- 目标：分标签页配置（43、89–90 行），`UserDefaults` 与 `Keychain`（43、93 行），导入/导出 `.plist`（89 行）。
- 最小实现：蓝牙/记录/AI/悬浮窗/热力图五页；默认值与重置；敏感项密钥入 `Keychain`；导入/导出配置。
- 验证点：配置持久化与即时生效；密钥不落盘日志；导入非法文件失败提示。
- 测试方法：回归切换各项设置；重启后校验；文件对比；阈值：设置生效延迟 <100ms，无敏感泄露。

**快捷键 Demo**
- 目标：`Option+Cmd+R` 展收（83 行），`Option+Cmd+A` 切换 AI（84 行）。
- 最小实现：全局热键注册；与菜单动作一致；冲突检测与提示。
- 验证点：前后台生效；全屏下可用；与系统快捷键无冲突。
- 测试方法：枚举常见冲突组合；统计触发成功率；阈值：≥99%。

**通知与轻提示 Demo**
- 目标：复制/错误轻提示为主，系统通知为辅（92 行）。
- 最小实现：应用内气泡提示栈；必要场景触发系统通知；权限管理流程。
- 验证点：提示节流与合并；权限未授予时降级策略。
- 测试方法：高频错误注入；观察提示行为；阈值：不出现提示风暴，用户可辨识。

**导出/导入记录 Demo**
- 目标：底部按钮与二次确认（12 行），导出所有记录（87 行），沙盒路径限制（94 行）。
- 最小实现：选择导出格式；二次确认；文件写入；导入合并/覆盖策略。
- 验证点：中文编码正确；大文件性能；错误路径处理。
- 测试方法：导出 100k 记录到 `~/Library/Application Support/QuiteNote/`；读取校验哈希；阈值：写入 P95 <100ms/MB。

**安全与隐私验证**
- 目标：密钥入 `Keychain`（93 行）、云端加密传输说明（75 行）、日志脱敏。
- 测试方法：全局搜索敏感打印；篡改配置与回退；API Key 加解密回归；阈值：0 条敏感日志。

**性能与稳定性**
- 指标：UI 帧率、事件处理耗时、存取 P95、内存占用、崩溃率。
- 方法：采样与打点；长时间运行 24h；断连/重连/无网络/大量记录滚动与筛选（120–121 行）。
- 目标阈值：无崩溃；内存稳定<500MB；UI 无明显卡顿；端到端链路可靠≥99%。

**集成场景链路**
- 场景：硬件 `0x01` 采集→保存记录→ACK→悬浮窗不弹出；硬件 `0x02` 展开→再次 `0x02` 收起（101 行）；热力图点击联动（102 行）。
- 验证：使用真实按钮序列与真实剪贴板内容；观测 UI 与存储一致并打点统计。

**工具与环境**
- macOS 13+、Xcode 15+；BLE 外设/手机模拟器（nRF Connect/LightBlue）；真实云端 API Key 入 `Keychain`；本地推理服务；度量与日志收集。

**验收与里程碑对应**
- 里程碑 A–F（109–116 行）分别以上述 Demo 的“阈值与通过标准”为验收门槛；每里程碑交付可运行预览与测试报告（121 行）。